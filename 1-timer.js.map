{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/themes/confetti.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst timePicker = document.querySelector('#datetime-picker');\nconst button = document.querySelector('button[data-start]');\nconst seconds = document.querySelector('span[data-seconds]');\nconst minutes = document.querySelector('span[data-minutes]');\nconst hours = document.querySelector('span[data-hours]');\nconst days = document.querySelector('span[data-days]');\nlet userSelectedDate = null;\nlet id = null;\n\nflatpickr(timePicker, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n    if (userSelectedDate - Date.now() > 0) {\n      button.disabled = false;\n    } else {\n      button.disabled = true;\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n    }\n  },\n});\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\nfunction addLeadingZero(value) {\n  if (String(value).length < 2) {\n    return String(value).padStart(2, '0');\n  }\n  return String(value);\n}\n\nfunction countDown() {\n  if (userSelectedDate - Date.now() > 0) {\n    let dif = convertMs(userSelectedDate - Date.now());\n    seconds.textContent = addLeadingZero(dif.seconds);\n    minutes.textContent = addLeadingZero(dif.minutes);\n    hours.textContent = addLeadingZero(dif.hours);\n    days.textContent = addLeadingZero(dif.days);\n    button.disabled = true;\n    button.style.cursor = 'not-allowed';\n    timePicker.disabled = true;\n    timePicker.style.cursor = 'not-allowed';\n    if (\n      seconds.textContent === '00' &&\n      minutes.textContent === '00' &&\n      hours.textContent === '00' &&\n      days.textContent === '00'\n    ) {\n      clearInterval(id);\n      ['seconds', 'minutes', 'hours', 'days'].forEach(unit => {\n        document.querySelector(`span[data-${unit}]`).textContent = '00';\n      });\n      timePicker.disabled = false;\n      timePicker.style.cursor = 'pointer';\n      button.style.cursor = 'auto';\n      return;\n    }\n  }\n}\nbutton.onclick = () => {\n  clearInterval(id);\n  id = setInterval(() => {\n    countDown();\n  }, 1000);\n};\n"],"names":["timePicker","button","seconds","minutes","hours","days","userSelectedDate","id","flatpickr","selectedDates","iziToast","convertMs","ms","addLeadingZero","value","countDown","dif","unit"],"mappings":"+IAKA,MAAMA,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAO,SAAS,cAAc,iBAAiB,EACrD,IAAIC,EAAmB,KACnBC,EAAK,KAETC,EAAUR,EAAY,CACpB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQS,EAAe,CACrBH,EAAmBG,EAAc,CAAC,EAC9BH,EAAmB,KAAK,IAAG,EAAK,EAClCL,EAAO,SAAW,IAElBA,EAAO,SAAW,GAClBS,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UAClB,CAAO,EAEJ,CACH,CAAC,EAED,SAASC,EAAUC,EAAI,CAQrB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAE1BR,EAAQ,KAAK,MAAOQ,EAAK,MAAO,IAAI,EAEpCT,EAAU,KAAK,MAAQS,EAAK,MAAO,KAAQ,GAAM,EAEjDV,EAAU,KAAK,MAASU,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAP,EAAM,MAAAD,EAAO,QAAAD,EAAS,QAAAD,CAAS,CAC1C,CACA,SAASW,EAAeC,EAAO,CAC7B,OAAI,OAAOA,CAAK,EAAE,OAAS,EAClB,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAE/B,OAAOA,CAAK,CACrB,CAEA,SAASC,GAAY,CACnB,GAAIT,EAAmB,KAAK,IAAG,EAAK,EAAG,CACrC,IAAIU,EAAML,EAAUL,EAAmB,KAAK,IAAG,CAAE,EASjD,GARAJ,EAAQ,YAAcW,EAAeG,EAAI,OAAO,EAChDb,EAAQ,YAAcU,EAAeG,EAAI,OAAO,EAChDZ,EAAM,YAAcS,EAAeG,EAAI,KAAK,EAC5CX,EAAK,YAAcQ,EAAeG,EAAI,IAAI,EAC1Cf,EAAO,SAAW,GAClBA,EAAO,MAAM,OAAS,cACtBD,EAAW,SAAW,GACtBA,EAAW,MAAM,OAAS,cAExBE,EAAQ,cAAgB,MACxBC,EAAQ,cAAgB,MACxBC,EAAM,cAAgB,MACtBC,EAAK,cAAgB,KACrB,CACA,cAAcE,CAAE,EAChB,CAAC,UAAW,UAAW,QAAS,MAAM,EAAE,QAAQU,GAAQ,CACtD,SAAS,cAAc,aAAaA,CAAI,GAAG,EAAE,YAAc,IACnE,CAAO,EACDjB,EAAW,SAAW,GACtBA,EAAW,MAAM,OAAS,UAC1BC,EAAO,MAAM,OAAS,OACtB,MACN,CACA,CACA,CACAA,EAAO,QAAU,IAAM,CACrB,cAAcM,CAAE,EAChBA,EAAK,YAAY,IAAM,CACrBQ,EAAW,CACZ,EAAE,GAAI,CACT"}